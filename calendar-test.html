<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>Calendar</title>
    
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <!-- Bootstrap CSS -->
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/css/bootstrap.min.css"
              integrity="sha384-9gVQ4dYFwwWSjIDZnLEWnxCjeSWFphJiwGPXr1jddIhOegiu1FwO5qRGvFXOdJZ4" crossorigin="anonymous">
    
    </head>
    <body>
    
    
    
    
    
    
    
    <div class="container ">
      <div class="jumbotron">
      <h1 class="display-4">Calendar Filter</h1>
      <p class="lead">Welcome to Calendar Filter, in this program you will be able to filter out a calendar for select days.</p>
      <hr class="my-4">
    
    </div>
    
    
    
            <br/>
            <div class="row">
              <div class="col-sm-4">
              </div>
              <div class="col-sm-4">
              <form class="form-inline">
    
                  <label for="year"></label><select style="display:block; margin:auto" class="form-control" name="year" id="year">
    
                  <option value=2018>2018</option>
                  <option value=2019>2019</option>
                  <option value=2020>2020</option>
                  <option value=2021>2021</option>
                  <option value=2022>2022</option>
                  <option value=2023>2023</option>
                  <option value=2024>2024</option>
                  <option value=2025>2025</option>
                  <option value=2026>2026</option>
                  <option value=2027>2027</option>
                  <option value=2028>2028</option>
                  <option value=2029>2029</option>
                  <option value=2030>2030</option>
    
                  <option value=2031>2031</option>
                  <option value=2032>2032</option>
                  <option value=2033>2033</option>
                  <option value=2034>2034</option>
                  <option value=2035>2035</option>
    
              </select></form>
            </div>
            <div class="col-sm-4"></div>
          </div>
    
    <br><br>
    <div class="row">
      <div class="col-sm-4">
    </div>
    <div class="col-sm-4"><button style="display:block; margin:auto" onclick="fillYear()">Filter me!</button>
      <br><button style="display:block; margin:auto" onclick="clearYear()">Clear me!</button>
    </div>
    <div class="col-sm-4"></div>
    </div>
    </div>
    
    <br />
    <br />
    <hr>
    <div class="container">
    
      <div class="row">
        <div class="col-sm-6">
          <form class="form-inline">
              <label class="lead mr-2 ml-2" for="weekday">Select day: </label>
              <select style="display:block; margin:auto" class="form-control " name="weekday" id="weekday" >
                  <option value=0>Sun</option>
                  <option value=1>Mon</option>
                  <option value=2>Tues</option>
                  <option value=3>Wed</option>
                  <option value=4>Thurs</option>
                  <option value=5>Fri</option>
                  <option value=6>Sat</option>
              </select>
            </form>
          </div>
          <div class="col-sm-6">
        
            <form class="form-inline">
              <label class="lead mr-2 ml-2" for="weekdayiteration">Select iteration: </label>
              <select style="display:block; margin:auto" class="form-control " name="weekdayiteration" id="weekdayiteration" >
              <option value=1>First</option>
              <option value=2>Second</option>
              <option value=3>Third</option>
              <option value=4>Fourth</option>
              <option value=5>Fifth</option>
                  
    
    
          </select></form>
          </div>
    
        </div>
      </div>
    
    
        <div class="row">
            <div class="lead col-sm-4">
            </div>
            <div class="lead col-sm-4" style="display:block; margin:auto" id="calendarFilterID">
            </div>
            <div class="lead col-sm-4">
            </div>
        </div>
    
    </div>
    <!--<button name="jump" onclick="jump()">Go</button>-->
    <!-- <script src="scripts.js"></script> -->
   <script>
        // Author: Adrian Domingo
/*
Purpose: To filter out a calendar, all written in javascript.
*/

// Declare Globals
//                  0       1      2       3      4       5     6
let daysOfWeek2 = ["Sun", "Mon", "Tues", "Wed", "Thurs", "Fri", "Sat"];
//                  0             1       2         3       4       5       6       7         8             9         10          11
let monthArray = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"];
let daysOfMonthArrva = [];



// monthIndex is based on 0....11
// January, .... , December

// returns number of days in a month, with a given year
// starting from 0, ... , 11
// January, ... December
function daysInMonth(month, year) {
  return 32 - new Date(year, month, 32).getDate();
}

// returns the day of the week, from 0, 1, 2, 3, 4, 5, 6
// sun, mon, tues, wed, thurs, fri, sat
// from a given month in a given year
function firstDay(month, year) {
  return new Date(year,month).getDay();
}


// for day
// indexing must start at 1 and end lessthan or equal, 1 <= myDate

console.log("*************");
console.log("**************");

// fill array with dayValue, dayName,
// for months in a thisYear
  // for days in months fill array\

// fill an array with 365 days of the year for a given year
// not including leap year
// if leap year, you must add an extra day to February, February 29th
function leapYear(year)
{
  return ((year % 4 == 0) && (year % 100 != 0)) || (year % 400 == 0);
}

function fillYear( ) {
  // load up some html code here to get the data from client
  var year = document.getElementById("year");
  year = parseInt(year.value);

  // declare an array to hold the values;
  var arrayCal = [];

  // fillcounterMonths represents months
  var fillCounterMonths = 0;
  for ( i = 0; i <= 11; i++ ) {
    var numDays = daysInMonth(fillCounterMonths, year);
    
    var firstDayNum = firstDay(fillCounterMonths, year);
    // increment the array by holding values of day, day starts at 1
    for (j = 1; j <= numDays; j++ ) {
      // reset the values because we have to keep track if
      if ( firstDayNum == 7 ) {
        firstDayNum = 0;
      }

      // ****** logic is correct but you need to define the array outside first.

        // you can declare even if month#2 == 0
        var even = true;
        if ( ((i+1) % 2) == 0) {
            console.log("true!");
            even = true;
        } else {
            even = false;
        }
      arrayCal.push({
          day: j,
          dayOfWeek: daysOfWeek2[firstDayNum],
          month: i,
          isOdd: even
      });

      firstDayNum++;
    }
    //console.log(arrayCal);
    console.log("******** end of month");
    numDays = 0; // reset the value
    firstDayNum = -1; // reset the value

    fillCounterMonths++; // increment to the next month\

  }

var filterMon = document.getElementById("calendarFilterID"); // body of the calendar
filterMon.appendChild(document.createElement("h1"));
filterMon.appendChild(document.createTextNode(year));
var linebreak = document.createElement('br');
  filterMon.appendChild(linebreak);


  // invoke the filter here
  filter( arrayCal );
}

// Should I store all this data in an array?
// get a day and which iteration you want to display
// and take in an array to check
// I want 3rd sundays of the year
function filter( arrayCal ) {
  
  let day = document.getElementById("weekday");
  day = parseInt(day.value);
  console.log("value of day is " + day );
  day = daysOfWeek2[day];
  let iteration = document.getElementById("weekdayiteration")
  iteration = parseInt(iteration.value);
  console.log("value of iteration is " + iteration );

  var filterMon = document.getElementById("calendarFilterID"); // body of the calendar

  var dayTracker = 0;
  var monthTracker = 0; // Represent January
  var flag = true;
  //monthTracker = arrayCal[0].month; // set the value to january
  //var filteredDays = document.createElement('h1');
  filterMon.appendChild(document.createTextNode("The filtered days of the year are: "));

  var linebreak = document.createElement('br');
  filterMon.appendChild(linebreak);
  for ( i = 0; i < arrayCal.length - 1; i++) {

    // check if month value has changed if so turn flag to changed
     if ( arrayCal[i].month != monthTracker ){
      //change flag

      flag = true;
      dayTracker = 0;
      monthTracker = arrayCal[i].month; // monthTracker is now equal to current month
     }

    // find the selected day, now increment the tracker
    // check flag if month is done
    if ( arrayCal[i].dayOfWeek == day) {
      dayTracker++;
      // if the dayTracker is equal to the iteration; i.e. 3rd week and month changed
      if ( dayTracker == iteration && flag == true) {
      
        //set flag to false
        console.log("FOUND the " + iteration + " " + arrayCal[i].dayOfWeek);
        console.log(arrayCal[i].dayOfWeek + " " + arrayCal[i].day + " " + monthArray[arrayCal[i].month] + arrayCal[i].isOdd );

        // add all of these to a child of <p>
        
        filterMon.appendChild(document.createTextNode( arrayCal[i].dayOfWeek + " " + monthArray[arrayCal[i].month] + " " + arrayCal[i].day ) );

        var linebreak = document.createElement('br');
        filterMon.appendChild(linebreak);

        flag = false;
      }
    }
  }
  var horizonbreak = document.createElement('hr');
  filterMon.appendChild(horizonbreak);
}

// just clear the content now
function clearYear() {
  var filterMon = document.getElementById("calendarFilterID"); // body of the calendar
  filterMon.innerHTML = "";
}


//filter( "Fri", 5, daysOfMonthArrva);


   </script>
    
    <!-- Optional JavaScript for bootstrap -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
            integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
            crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js"
            integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ"
            crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js"
            integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm"
            crossorigin="anonymous"></script>
    
    
    </body>
</html>